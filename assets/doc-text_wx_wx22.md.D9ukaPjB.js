import{_ as a,c as t,a2 as o,o as r}from"./chunks/framework.3VuPyQdv.js";const s="/docs-demo/wxImages/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E7%9A%84%E9%99%90%E5%88%B6.png",p="/docs-demo/wxImages/%E5%8F%91%E8%B5%B7GET%E8%AF%B7%E6%B1%82.png",i="/docs-demo/wxImages/%E5%8F%91%E8%B5%B7POST%E8%AF%B7%E6%B1%82.png",l="/docs-demo/wxImages/%E5%9C%A8%E9%A1%B5%E9%9D%A2%E5%88%9A%E5%8A%A0%E8%BD%BD%E6%97%B6%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE.png",h="/docs-demo/wxImages/%E8%B7%B3%E8%BF%87request%E5%90%88%E6%B3%95%E5%9F%9F%E5%90%8D%E6%A0%A1%E9%AA%8C.png",q=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"doc-text/wx/wx22.md","filePath":"doc-text/wx/wx22.md","lastUpdated":1743683524000}'),n={name:"doc-text/wx/wx22.md"};function c(d,e,m,E,u,_){return r(),t("div",null,e[0]||(e[0]=[o('<h2 id="_21-网络数据请求" tabindex="-1">21.网络数据请求 <a class="header-anchor" href="#_21-网络数据请求" aria-label="Permalink to &quot;21.网络数据请求&quot;">​</a></h2><h4 id="_21-1-小程序中网络数据请求的限制" tabindex="-1">21.1 小程序中网络数据请求的限制 <a class="header-anchor" href="#_21-1-小程序中网络数据请求的限制" aria-label="Permalink to &quot;21.1 小程序中网络数据请求的限制&quot;">​</a></h4><p>​ 出于安全性方面的考虑，小程序官方对数据接口的请求做出了如下两个限制：</p><p>​ ①只能请求 HTTPS 类型的接口</p><p>​ ②必须将接口的域名添加到信任列表中</p><img src="'+s+'" alt="image-20230308200126923" style="zoom:67%;"><hr><h4 id="_21-2-配置-request-合法域名" tabindex="-1">21.2 配置 request 合法域名 <a class="header-anchor" href="#_21-2-配置-request-合法域名" aria-label="Permalink to &quot;21.2  配置 request 合法域名&quot;">​</a></h4><p>​ 需求描述：假设在自己的微信小程序中，希望请求 <a href="https://www.escook.cn/" target="_blank" rel="noreferrer">https://www.escook.cn/</a> 域名下的接口</p><p>​ 配置步骤：登录微信小程序管理后台 -&gt; 开发 -&gt; 开发设置 -&gt; 服务器域名 -&gt; 修改 request 合法域名</p><p>​ 注意事项：</p><p>​ ①域名只支持 https 协议</p><p>​ ②域名不能使用 IP 地址或 localhost</p><p>​ ③域名必须经过 ICP 备案</p><p>​ ④服务器域名一个月内最多可申请 5 次修改</p><hr><h4 id="_21-3-发起-get-请求" tabindex="-1">21.3 发起 GET 请求 <a class="header-anchor" href="#_21-3-发起-get-请求" aria-label="Permalink to &quot;21.3 发起 GET 请求&quot;">​</a></h4><p>​ 调用微信小程序提供的 wx.request() 方法，可以发起 GET 数据请求，示例代码如下：</p><p>​ <img src="'+p+'" alt="image-20230308200343461" style="zoom:67%;"></p><hr><h4 id="_21-4-发起-post-请求" tabindex="-1">21.4 发起 POST 请求 <a class="header-anchor" href="#_21-4-发起-post-请求" aria-label="Permalink to &quot;21.4 发起 POST 请求&quot;">​</a></h4><p>​ 调用微信小程序提供的 wx.request() 方法，可以发起 POST 数据请求，示例代码如下：</p><img src="'+i+'" alt="image-20230308200441620" style="zoom:67%;"><hr><h4 id="_21-5-在页面刚加载时请求数据" tabindex="-1">21.5 在页面刚加载时请求数据 <a class="header-anchor" href="#_21-5-在页面刚加载时请求数据" aria-label="Permalink to &quot;21.5 在页面刚加载时请求数据&quot;">​</a></h4><p>​ 在很多情况下，我们需要在页面刚加载的时候，自动请求一些初始化的数据。此时需要在页面的 onLoad 事件中调用获取数据的函数，示例代码如下：</p><p>​ <img src="'+l+'" alt="image-20230308200706500" style="zoom:67%;"></p><hr><h4 id="_21-6-跳过-request-合法域名校验" tabindex="-1">21.6 跳过 request 合法域名校验 <a class="header-anchor" href="#_21-6-跳过-request-合法域名校验" aria-label="Permalink to &quot;21.6 跳过 request 合法域名校验&quot;">​</a></h4><p>​ 如果后端程序员仅仅提供了 http 协议的接口、暂时没有提供 https 协议的接口。</p><p>​ 此时为了不耽误开发的进度，我们可以在微信开发者工具中，临时开启「开发环境不校验请求域名、TLS 版本及 HTTPS 证书」选项，跳过 request 合法域名的校验。</p><blockquote><p>​ 注意：</p><p>​ 跳过 request 合法域名校验的选项，仅限在开发与调试阶段使用！</p></blockquote><img src="'+h+'" alt="image-20230308200838173" style="zoom:67%;"><hr><h4 id="_21-7-关于跨域和-ajax-的说明" tabindex="-1">21.7 关于跨域和 Ajax 的说明 <a class="header-anchor" href="#_21-7-关于跨域和-ajax-的说明" aria-label="Permalink to &quot;21.7 关于跨域和 Ajax 的说明&quot;">​</a></h4><p>​ 跨域问题只存在于基于浏览器的 Web 开发中。由于小程序的宿主环境不是浏览器，而是微信客户端，所以小程序中不存在跨域的问题。</p><p>​ Ajax 技术的核心是依赖于浏览器中的 XMLHttpRequest 这个对象，由于小程序的宿主环境是微信客户端，所以小程序中不能叫做“发起 Ajax 请求”，而是叫做“发起网络数据请求”。</p>',37)]))}const B=a(n,[["render",c]]);export{q as __pageData,B as default};
